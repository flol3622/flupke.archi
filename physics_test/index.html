<!DOCTYPE html>
<html>

<head>
    <title>Matter.js Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.14.2/matter.min.js"></script>
    <style>
        #ball-container {
            position: absolute;
            width: 40px;
            height: 40px;
            top: 0px;
            left: 0px;
            color: blue;
        }

        .block {
            position: absolute;
            top: 0px;
            left: 0px;
            color: blue;
            background-color: rgb(255, 0, 0);
            z-index: 1;
            font-size: 30px;
        }
    </style>

</head>

<body>


    <canvas id="canvas"
        style="position: absolute; top:0px; left:0px; height: 100%; width:100%; overflow: hidden;"></canvas>
    <div class="block small">Made with <a href="http://brm.io/matter-js/">Matter.js</a></div>
    <div class="block">:)</div>
    <div class="block">It's HTML5!!</div>



    <script>
        var VIEW = {};
        VIEW.SAFE_WIDTH = 100;
        VIEW.SAFE_HEIGHT = 100;
        VIEW.scale = Math.min(window.innerWidth / VIEW.SAFE_WIDTH, window.innerHeight / VIEW.SAFE_HEIGHT);
        VIEW.width = window.innerWidth / VIEW.scale;
        VIEW.height = window.innerHeight / VIEW.scale;
        VIEW.centerX = VIEW.width / 2;
        VIEW.centerY = VIEW.height / 2;
        VIEW.offsetX = (VIEW.width - VIEW.SAFE_WIDTH) / 2 / VIEW.scale;
        VIEW.offsetY = (VIEW.height - VIEW.SAFE_HEIGHT) / 2 / VIEW.scale;

        // module aliases
        var Engine = Matter.Engine,
            Render = Matter.Render,
            World = Matter.World,
            Bodies = Matter.Bodies;

        // create an engine
        var engine = Engine.create();

        // create a renderer
        var render = Render.create({
            canvas: document.getElementById("canvas"),
            engine: engine,
            options: {
                wireframes: false,
                width: window.innerWidth,
                height: window.innerHeight,
                background: '#fff',
            }
        });

        // get the canvas size
        var canvas = render.canvas;

        // create boundaries around the edge of the canvas
        var boundaries = [
            // top boundary
            Bodies.rectangle(canvas.width / 2, 0, canvas.width, 5, {
                isStatic: true, render: {
                    fillStyle: '#FFFFFF'
                }
            }),
            // bottom boundary
            Bodies.rectangle(canvas.width / 2, canvas.height, canvas.width, 5, {
                isStatic: true, render: {
                    fillStyle: '#FFFFFF'
                }
            }),
            // left boundary
            Bodies.rectangle(0, canvas.height / 2, 5, canvas.height, {
                isStatic: true, render: {
                    fillStyle: '#FFFFFF'
                }
            }),
            // right boundary
            Bodies.rectangle(canvas.width, canvas.height / 2, 5, canvas.height, {
                isStatic: true, render: {
                    fillStyle: '#FFFFFF'
                }
            })
        ];

        // add the boundaries to the world
        World.add(engine.world, boundaries);

        // create necessary bodies
        var bodiesDom = document.getElementsByClassName("block");
        console.log(bodiesDom);
        var bodies = [];
        for (var i = 0, l = bodiesDom.length; i < l; i++) {
            var body = Bodies.circle(50, 100, 50, {
                restitution: 0.4,
                render: {
                    fillStyle: '#FFFFFF',
                    strokeStyle: "blue",
                    lineWidth: 10,
                }
            });
            bodiesDom[i].id = body.id;
            bodies.push(body);
        }
        console.log(bodies);
        World.add(engine.world, bodies);

        // add mouse control
        var mouse = Matter.Mouse.create(render.canvas),
            mouseConstraint = Matter.MouseConstraint.create(engine, {
                mouse: mouse,
                constraint: {
                    stiffness: 0.2,
                    render: {
                        visible: false
                    }
                }
            });

        World.add(engine.world, mouseConstraint);

        // run the engine
        Engine.run(engine);

        // run the renderer
        Render.run(render);

        // update position divs with position bodies
        window.requestAnimationFrame(update);
        function update() {
            for (var i = 0, l = bodiesDom.length; i < l; i++) {
                var bodyDom = bodiesDom[i];
                var body = null;
                for (var j = 0, k = bodies.length; j < k; j++) {
                    if (bodies[j].id == bodyDom.id) {
                        body = bodies[j];
                        break;
                    }
                }

                if (body === null) continue;

                bodyDom.style.transform = "translate( "
                    + (body.position.x - bodyDom.offsetWidth / 2)
                    + "px, "
                    + (body.position.y - bodyDom.offsetHeight / 2)
                    + "px )";
            }
            window.requestAnimationFrame(update);
        }
    </script>

</body>

</html>